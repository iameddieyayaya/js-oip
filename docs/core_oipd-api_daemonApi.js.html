

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      core/oipd-api/daemonApi.js - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.3.0/highlightjs-line-numbers.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  <link type="text/css" rel="stylesheet" href="styles/monokai-sublime.css">

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      js-oip
    </h3>

    <h3>Classes</h3><ul><li id="Artifact-nav"><a href="Artifact.html">Artifact</a><ul class='methods'><li data-type="method" id="Artifact-getArtifactSubtype-nav"><a href="Artifact.html#.getArtifactSubtype">getArtifactSubtype</a></li><li data-type="method" id="Artifact-getArtifactType-nav"><a href="Artifact.html#.getArtifactType">getArtifactType</a></li><li data-type="method" id="Artifact-addFile-nav"><a href="Artifact.html#addFile">addFile</a></li><li data-type="method" id="Artifact-addSinglePaymentAddress-nav"><a href="Artifact.html#addSinglePaymentAddress">addSinglePaymentAddress</a></li><li data-type="method" id="Artifact-addTokenRule-nav"><a href="Artifact.html#addTokenRule">addTokenRule</a></li><li data-type="method" id="Artifact-createPreimage-nav"><a href="Artifact.html#createPreimage">createPreimage</a></li><li data-type="method" id="Artifact-fromJSON-nav"><a href="Artifact.html#fromJSON">fromJSON</a></li><li data-type="method" id="Artifact-getArtifact-nav"><a href="Artifact.html#getArtifact">getArtifact</a></li><li data-type="method" id="Artifact-getBlock-nav"><a href="Artifact.html#getBlock">getBlock</a></li><li data-type="method" id="Artifact-getBlockHash-nav"><a href="Artifact.html#getBlockHash">getBlockHash</a></li><li data-type="method" id="Artifact-getClassName-nav"><a href="Artifact.html#getClassName">getClassName</a></li><li data-type="method" id="Artifact-getDeactivated-nav"><a href="Artifact.html#getDeactivated">getDeactivated</a></li><li data-type="method" id="Artifact-getDescription-nav"><a href="Artifact.html#getDescription">getDescription</a></li><li data-type="method" id="Artifact-getDetail-nav"><a href="Artifact.html#getDetail">getDetail</a></li><li data-type="method" id="Artifact-getDuration-nav"><a href="Artifact.html#getDuration">getDuration</a></li><li data-type="method" id="Artifact-getEditVersion-nav"><a href="Artifact.html#getEditVersion">getEditVersion</a></li><li data-type="method" id="Artifact-getFiles-nav"><a href="Artifact.html#getFiles">getFiles</a></li><li data-type="method" id="Artifact-getLocation-nav"><a href="Artifact.html#getLocation">getLocation</a></li><li data-type="method" id="Artifact-getMaxDiscount-nav"><a href="Artifact.html#getMaxDiscount">getMaxDiscount</a></li><li data-type="method" id="Artifact-getMeta-nav"><a href="Artifact.html#getMeta">getMeta</a></li><li data-type="method" id="Artifact-getNetwork-nav"><a href="Artifact.html#getNetwork">getNetwork</a></li><li data-type="method" id="Artifact-getNSFW-nav"><a href="Artifact.html#getNSFW">getNSFW</a></li><li data-type="method" id="Artifact-getOriginalTXID-nav"><a href="Artifact.html#getOriginalTXID">getOriginalTXID</a></li><li data-type="method" id="Artifact-getPaymentAddress-nav"><a href="Artifact.html#getPaymentAddress">getPaymentAddress</a></li><li data-type="method" id="Artifact-getPaymentAddresses-nav"><a href="Artifact.html#getPaymentAddresses">getPaymentAddresses</a></li><li data-type="method" id="Artifact-getPaymentFiat-nav"><a href="Artifact.html#getPaymentFiat">getPaymentFiat</a></li><li data-type="method" id="Artifact-getPaymentScale-nav"><a href="Artifact.html#getPaymentScale">getPaymentScale</a></li><li data-type="method" id="Artifact-getPromoterCut-nav"><a href="Artifact.html#getPromoterCut">getPromoterCut</a></li><li data-type="method" id="Artifact-getPubAddress-nav"><a href="Artifact.html#getPubAddress">getPubAddress</a></li><li data-type="method" id="Artifact-getPublisherName-nav"><a href="Artifact.html#getPublisherName">getPublisherName</a></li><li data-type="method" id="Artifact-getRetailerCut-nav"><a href="Artifact.html#getRetailerCut">getRetailerCut</a></li><li data-type="method" id="Artifact-getSignature-nav"><a href="Artifact.html#getSignature">getSignature</a></li><li data-type="method" id="Artifact-getSubtype-nav"><a href="Artifact.html#getSubtype">getSubtype</a></li><li data-type="method" id="Artifact-getSuggestedTip-nav"><a href="Artifact.html#getSuggestedTip">getSuggestedTip</a></li><li data-type="method" id="Artifact-getSupportedCoins-nav"><a href="Artifact.html#getSupportedCoins">getSupportedCoins</a></li><li data-type="method" id="Artifact-getTags-nav"><a href="Artifact.html#getTags">getTags</a></li><li data-type="method" id="Artifact-getThumbnail-nav"><a href="Artifact.html#getThumbnail">getThumbnail</a></li><li data-type="method" id="Artifact-getTime-nav"><a href="Artifact.html#getTime">getTime</a></li><li data-type="method" id="Artifact-getTimestamp-nav"><a href="Artifact.html#getTimestamp">getTimestamp</a></li><li data-type="method" id="Artifact-getTipAddresses-nav"><a href="Artifact.html#getTipAddresses">getTipAddresses</a></li><li data-type="method" id="Artifact-getTitle-nav"><a href="Artifact.html#getTitle">getTitle</a></li><li data-type="method" id="Artifact-getTokenRules-nav"><a href="Artifact.html#getTokenRules">getTokenRules</a></li><li data-type="method" id="Artifact-getTXID-nav"><a href="Artifact.html#getTXID">getTXID</a></li><li data-type="method" id="Artifact-getType-nav"><a href="Artifact.html#getType">getType</a></li><li data-type="method" id="Artifact-getVersion-nav"><a href="Artifact.html#getVersion">getVersion</a></li><li data-type="method" id="Artifact-getYear-nav"><a href="Artifact.html#getYear">getYear</a></li><li data-type="method" id="Artifact-import041-nav"><a href="Artifact.html#import041">import041</a></li><li data-type="method" id="Artifact-import042-nav"><a href="Artifact.html#import042">import042</a></li><li data-type="method" id="Artifact-importAlexandriaMedia-nav"><a href="Artifact.html#importAlexandriaMedia">importAlexandriaMedia</a></li><li data-type="method" id="Artifact-isPaid-nav"><a href="Artifact.html#isPaid">isPaid</a></li><li data-type="method" id="Artifact-isValid-nav"><a href="Artifact.html#isValid">isValid</a></li><li data-type="method" id="Artifact-setBlock-nav"><a href="Artifact.html#setBlock">setBlock</a></li><li data-type="method" id="Artifact-setBlockHash-nav"><a href="Artifact.html#setBlockHash">setBlockHash</a></li><li data-type="method" id="Artifact-setDeactivated-nav"><a href="Artifact.html#setDeactivated">setDeactivated</a></li><li data-type="method" id="Artifact-setDescription-nav"><a href="Artifact.html#setDescription">setDescription</a></li><li data-type="method" id="Artifact-setDetail-nav"><a href="Artifact.html#setDetail">setDetail</a></li><li data-type="method" id="Artifact-setEditVersion-nav"><a href="Artifact.html#setEditVersion">setEditVersion</a></li><li data-type="method" id="Artifact-setLocation-nav"><a href="Artifact.html#setLocation">setLocation</a></li><li data-type="method" id="Artifact-setMaxDiscount-nav"><a href="Artifact.html#setMaxDiscount">setMaxDiscount</a></li><li data-type="method" id="Artifact-setNetwork-nav"><a href="Artifact.html#setNetwork">setNetwork</a></li><li data-type="method" id="Artifact-setNSFW-nav"><a href="Artifact.html#setNSFW">setNSFW</a></li><li data-type="method" id="Artifact-setOriginalTXID-nav"><a href="Artifact.html#setOriginalTXID">setOriginalTXID</a></li><li data-type="method" id="Artifact-setPaymentFiat-nav"><a href="Artifact.html#setPaymentFiat">setPaymentFiat</a></li><li data-type="method" id="Artifact-setPaymentScale-nav"><a href="Artifact.html#setPaymentScale">setPaymentScale</a></li><li data-type="method" id="Artifact-setPromoterCut-nav"><a href="Artifact.html#setPromoterCut">setPromoterCut</a></li><li data-type="method" id="Artifact-setPubAddress-nav"><a href="Artifact.html#setPubAddress">setPubAddress</a></li><li data-type="method" id="Artifact-setPublisherName-nav"><a href="Artifact.html#setPublisherName">setPublisherName</a></li><li data-type="method" id="Artifact-setRetailerCut-nav"><a href="Artifact.html#setRetailerCut">setRetailerCut</a></li><li data-type="method" id="Artifact-setSignature-nav"><a href="Artifact.html#setSignature">setSignature</a></li><li data-type="method" id="Artifact-setSubtype-nav"><a href="Artifact.html#setSubtype">setSubtype</a></li><li data-type="method" id="Artifact-setSuggestedTip-nav"><a href="Artifact.html#setSuggestedTip">setSuggestedTip</a></li><li data-type="method" id="Artifact-setTags-nav"><a href="Artifact.html#setTags">setTags</a></li><li data-type="method" id="Artifact-setTime-nav"><a href="Artifact.html#setTime">setTime</a></li><li data-type="method" id="Artifact-setTimestamp-nav"><a href="Artifact.html#setTimestamp">setTimestamp</a></li><li data-type="method" id="Artifact-setTitle-nav"><a href="Artifact.html#setTitle">setTitle</a></li><li data-type="method" id="Artifact-setTXID-nav"><a href="Artifact.html#setTXID">setTXID</a></li><li data-type="method" id="Artifact-setType-nav"><a href="Artifact.html#setType">setType</a></li><li data-type="method" id="Artifact-setVersion-nav"><a href="Artifact.html#setVersion">setVersion</a></li><li data-type="method" id="Artifact-setYear-nav"><a href="Artifact.html#setYear">setYear</a></li><li data-type="method" id="Artifact-toJSON-nav"><a href="Artifact.html#toJSON">toJSON</a></li><li data-type="method" id="Artifact-toString-nav"><a href="Artifact.html#toString">toString</a></li></ul></li><li id="DaemonApi-nav"><a href="DaemonApi.html">DaemonApi</a><ul class='methods'><li data-type="method" id="DaemonApi-createQs-nav"><a href="DaemonApi.html#createQs">createQs</a></li><li data-type="method" id="DaemonApi-get041Artifact-nav"><a href="DaemonApi.html#get041Artifact">get041Artifact</a></li><li data-type="method" id="DaemonApi-get041Artifacts-nav"><a href="DaemonApi.html#get041Artifacts">get041Artifacts</a></li><li data-type="method" id="DaemonApi-getAlexandriaMediaArtifact-nav"><a href="DaemonApi.html#getAlexandriaMediaArtifact">getAlexandriaMediaArtifact</a></li><li data-type="method" id="DaemonApi-getAlexandriaMediaArtifacts-nav"><a href="DaemonApi.html#getAlexandriaMediaArtifacts">getAlexandriaMediaArtifacts</a></li><li data-type="method" id="DaemonApi-getArtifact-nav"><a href="DaemonApi.html#getArtifact">getArtifact</a></li><li data-type="method" id="DaemonApi-getArtifacts-nav"><a href="DaemonApi.html#getArtifacts">getArtifacts</a></li><li data-type="method" id="DaemonApi-getFloData-nav"><a href="DaemonApi.html#getFloData">getFloData</a></li><li data-type="method" id="DaemonApi-getHistorianData-nav"><a href="DaemonApi.html#getHistorianData">getHistorianData</a></li><li data-type="method" id="DaemonApi-getLastestHistorianData-nav"><a href="DaemonApi.html#getLastestHistorianData">getLastestHistorianData</a></li><li data-type="method" id="DaemonApi-getLatest041Artifacts-nav"><a href="DaemonApi.html#getLatest041Artifacts">getLatest041Artifacts</a></li><li data-type="method" id="DaemonApi-getLatest042Artifacts-nav"><a href="DaemonApi.html#getLatest042Artifacts">getLatest042Artifacts</a></li><li data-type="method" id="DaemonApi-getLatestAlexandriaMediaArtifacts-nav"><a href="DaemonApi.html#getLatestAlexandriaMediaArtifacts">getLatestAlexandriaMediaArtifacts</a></li><li data-type="method" id="DaemonApi-getLatestArtifacts-nav"><a href="DaemonApi.html#getLatestArtifacts">getLatestArtifacts</a></li><li data-type="method" id="DaemonApi-getLatestOip5Records-nav"><a href="DaemonApi.html#getLatestOip5Records">getLatestOip5Records</a></li><li data-type="method" id="DaemonApi-getLatestOip5Templates-nav"><a href="DaemonApi.html#getLatestOip5Templates">getLatestOip5Templates</a></li><li data-type="method" id="DaemonApi-getMultipart-nav"><a href="DaemonApi.html#getMultipart">getMultipart</a></li><li data-type="method" id="DaemonApi-getMultiparts-nav"><a href="DaemonApi.html#getMultiparts">getMultiparts</a></li><li data-type="method" id="DaemonApi-getNetwork-nav"><a href="DaemonApi.html#getNetwork">getNetwork</a></li><li data-type="method" id="DaemonApi-getOip5Mapping-nav"><a href="DaemonApi.html#getOip5Mapping">getOip5Mapping</a></li><li data-type="method" id="DaemonApi-getOip5Record-nav"><a href="DaemonApi.html#getOip5Record">getOip5Record</a></li><li data-type="method" id="DaemonApi-getOip5Records-nav"><a href="DaemonApi.html#getOip5Records">getOip5Records</a></li><li data-type="method" id="DaemonApi-getOip5Template-nav"><a href="DaemonApi.html#getOip5Template">getOip5Template</a></li><li data-type="method" id="DaemonApi-getOip5Templates-nav"><a href="DaemonApi.html#getOip5Templates">getOip5Templates</a></li><li data-type="method" id="DaemonApi-getRecord-nav"><a href="DaemonApi.html#getRecord">getRecord</a></li><li data-type="method" id="DaemonApi-getSyncStatus-nav"><a href="DaemonApi.html#getSyncStatus">getSyncStatus</a></li><li data-type="method" id="DaemonApi-getUrl-nav"><a href="DaemonApi.html#getUrl">getUrl</a></li><li data-type="method" id="DaemonApi-getVersion-nav"><a href="DaemonApi.html#getVersion">getVersion</a></li><li data-type="method" id="DaemonApi-searchArtifacts-nav"><a href="DaemonApi.html#searchArtifacts">searchArtifacts</a></li><li data-type="method" id="DaemonApi-searchArtifactsByType-nav"><a href="DaemonApi.html#searchArtifactsByType">searchArtifactsByType</a></li><li data-type="method" id="DaemonApi-searchFloData-nav"><a href="DaemonApi.html#searchFloData">searchFloData</a></li><li data-type="method" id="DaemonApi-searchOip5Records-nav"><a href="DaemonApi.html#searchOip5Records">searchOip5Records</a></li><li data-type="method" id="DaemonApi-searchOip5Templates-nav"><a href="DaemonApi.html#searchOip5Templates">searchOip5Templates</a></li><li data-type="method" id="DaemonApi-setUrl-nav"><a href="DaemonApi.html#setUrl">setUrl</a></li></ul></li><li id="ExplorerWallet-nav"><a href="ExplorerWallet.html">ExplorerWallet</a><ul class='methods'><li data-type="method" id="ExplorerWallet-addSpentTransaction-nav"><a href="ExplorerWallet.html#addSpentTransaction">addSpentTransaction</a></li><li data-type="method" id="ExplorerWallet-broadcastRawHex-nav"><a href="ExplorerWallet.html#broadcastRawHex">broadcastRawHex</a></li><li data-type="method" id="ExplorerWallet-buildInputsAndOutputs-nav"><a href="ExplorerWallet.html#buildInputsAndOutputs">buildInputsAndOutputs</a></li><li data-type="method" id="ExplorerWallet-buildTXHex-nav"><a href="ExplorerWallet.html#buildTXHex">buildTXHex</a></li><li data-type="method" id="ExplorerWallet-createManualUtxos-nav"><a href="ExplorerWallet.html#createManualUtxos">createManualUtxos</a></li><li data-type="method" id="ExplorerWallet-deleteHistory-nav"><a href="ExplorerWallet.html#deleteHistory">deleteHistory</a></li><li data-type="method" id="ExplorerWallet-deserialize-nav"><a href="ExplorerWallet.html#deserialize">deserialize</a></li><li data-type="method" id="ExplorerWallet-getCoinInfo-nav"><a href="ExplorerWallet.html#getCoinInfo">getCoinInfo</a></li><li data-type="method" id="ExplorerWallet-getECPair-nav"><a href="ExplorerWallet.html#getECPair">getECPair</a></li><li data-type="method" id="ExplorerWallet-getNetwork-nav"><a href="ExplorerWallet.html#getNetwork">getNetwork</a></li><li data-type="method" id="ExplorerWallet-getPubAddress-nav"><a href="ExplorerWallet.html#getPubAddress">getPubAddress</a></li><li data-type="method" id="ExplorerWallet-getSpentTransactions-nav"><a href="ExplorerWallet.html#getSpentTransactions">getSpentTransactions</a></li><li data-type="method" id="ExplorerWallet-getTxHistory-nav"><a href="ExplorerWallet.html#getTxHistory">getTxHistory</a></li><li data-type="method" id="ExplorerWallet-getUTXO-nav"><a href="ExplorerWallet.html#getUTXO">getUTXO</a></li><li data-type="method" id="ExplorerWallet-removeSpent-nav"><a href="ExplorerWallet.html#removeSpent">removeSpent</a></li><li data-type="method" id="ExplorerWallet-save-nav"><a href="ExplorerWallet.html#save">save</a></li><li data-type="method" id="ExplorerWallet-sendDataToChain-nav"><a href="ExplorerWallet.html#sendDataToChain">sendDataToChain</a></li><li data-type="method" id="ExplorerWallet-sendTx-nav"><a href="ExplorerWallet.html#sendTx">sendTx</a></li><li data-type="method" id="ExplorerWallet-serialize-nav"><a href="ExplorerWallet.html#serialize">serialize</a></li></ul></li><li id="IpfsHttpApi-nav"><a href="IpfsHttpApi.html">IpfsHttpApi</a><ul class='methods'><li data-type="method" id="IpfsHttpApi-onProgress-nav"><a href="IpfsHttpApi.html#onProgress">onProgress</a></li><li data-type="method" id="IpfsHttpApi-start-nav"><a href="IpfsHttpApi.html#start">start</a></li></ul></li><li id="IpfsXml-nav"><a href="IpfsXml.html">IpfsXml</a><ul class='methods'><li data-type="method" id="IpfsXml-onProgress-nav"><a href="IpfsXml.html#onProgress">onProgress</a></li><li data-type="method" id="IpfsXml-start-nav"><a href="IpfsXml.html#start">start</a></li></ul></li><li id="MPSingle-nav"><a href="MPSingle.html">MPSingle</a><ul class='methods'><li data-type="method" id="MPSingle-fromInput-nav"><a href="MPSingle.html#fromInput">fromInput</a></li><li data-type="method" id="MPSingle-getAddress-nav"><a href="MPSingle.html#getAddress">getAddress</a></li><li data-type="method" id="MPSingle-getAssembled-nav"><a href="MPSingle.html#getAssembled">getAssembled</a></li><li data-type="method" id="MPSingle-getBlock-nav"><a href="MPSingle.html#getBlock">getBlock</a></li><li data-type="method" id="MPSingle-getBlockHash-nav"><a href="MPSingle.html#getBlockHash">getBlockHash</a></li><li data-type="method" id="MPSingle-getData-nav"><a href="MPSingle.html#getData">getData</a></li><li data-type="method" id="MPSingle-getMax-nav"><a href="MPSingle.html#getMax">getMax</a></li><li data-type="method" id="MPSingle-getMeta-nav"><a href="MPSingle.html#getMeta">getMeta</a></li><li data-type="method" id="MPSingle-getPart-nav"><a href="MPSingle.html#getPart">getPart</a></li><li data-type="method" id="MPSingle-getReference-nav"><a href="MPSingle.html#getReference">getReference</a></li><li data-type="method" id="MPSingle-getSignature-nav"><a href="MPSingle.html#getSignature">getSignature</a></li><li data-type="method" id="MPSingle-getSignatureData-nav"><a href="MPSingle.html#getSignatureData">getSignatureData</a></li><li data-type="method" id="MPSingle-getTXID-nav"><a href="MPSingle.html#getTXID">getTXID</a></li><li data-type="method" id="MPSingle-hasValidSignature-nav"><a href="MPSingle.html#hasValidSignature">hasValidSignature</a></li><li data-type="method" id="MPSingle-isComplete-nav"><a href="MPSingle.html#isComplete">isComplete</a></li><li data-type="method" id="MPSingle-isStale-nav"><a href="MPSingle.html#isStale">isStale</a></li><li data-type="method" id="MPSingle-setAddress-nav"><a href="MPSingle.html#setAddress">setAddress</a></li><li data-type="method" id="MPSingle-setAssembled-nav"><a href="MPSingle.html#setAssembled">setAssembled</a></li><li data-type="method" id="MPSingle-setBlock-nav"><a href="MPSingle.html#setBlock">setBlock</a></li><li data-type="method" id="MPSingle-setBlockHash-nav"><a href="MPSingle.html#setBlockHash">setBlockHash</a></li><li data-type="method" id="MPSingle-setData-nav"><a href="MPSingle.html#setData">setData</a></li><li data-type="method" id="MPSingle-setIsComplete-nav"><a href="MPSingle.html#setIsComplete">setIsComplete</a></li><li data-type="method" id="MPSingle-setIsStale-nav"><a href="MPSingle.html#setIsStale">setIsStale</a></li><li data-type="method" id="MPSingle-setMax-nav"><a href="MPSingle.html#setMax">setMax</a></li><li data-type="method" id="MPSingle-setPart-nav"><a href="MPSingle.html#setPart">setPart</a></li><li data-type="method" id="MPSingle-setReference-nav"><a href="MPSingle.html#setReference">setReference</a></li><li data-type="method" id="MPSingle-setSignature-nav"><a href="MPSingle.html#setSignature">setSignature</a></li><li data-type="method" id="MPSingle-setTXID-nav"><a href="MPSingle.html#setTXID">setTXID</a></li><li data-type="method" id="MPSingle-signSelf-nav"><a href="MPSingle.html#signSelf">signSelf</a></li><li data-type="method" id="MPSingle-toString-nav"><a href="MPSingle.html#toString">toString</a></li></ul></li><li id="MultipartX-nav"><a href="MultipartX.html">MultipartX</a><ul class='methods'><li data-type="method" id="MultipartX-fromMultiparts-nav"><a href="MultipartX.html#fromMultiparts">fromMultiparts</a></li><li data-type="method" id="MultipartX-fromString-nav"><a href="MultipartX.html#fromString">fromString</a></li><li data-type="method" id="MultipartX-getMultiparts-nav"><a href="MultipartX.html#getMultiparts">getMultiparts</a></li><li data-type="method" id="MultipartX-toString-nav"><a href="MultipartX.html#toString">toString</a></li></ul></li><li id="OIP-nav"><a href="OIP.html">OIP</a><ul class='methods'><li data-type="method" id="OIP-broadcastRecord-nav"><a href="OIP.html#broadcastRecord">broadcastRecord</a></li><li data-type="method" id="OIP-edit-nav"><a href="OIP.html#edit">edit</a></li><li data-type="method" id="OIP-publish-nav"><a href="OIP.html#publish">publish</a></li><li data-type="method" id="OIP-publishMultiparts-nav"><a href="OIP.html#publishMultiparts">publishMultiparts</a></li><li data-type="method" id="OIP-signRecord-nav"><a href="OIP.html#signRecord">signRecord</a></li></ul></li><li id="Peer-nav"><a href="Peer.html">Peer</a><ul class='methods'><li data-type="method" id="Peer-announceTX-nav"><a href="Peer.html#announceTX">announceTX</a></li><li data-type="method" id="Peer-connect-nav"><a href="Peer.html#connect">connect</a></li><li data-type="method" id="Peer-handleGetData-nav"><a href="Peer.html#handleGetData">handleGetData</a></li><li data-type="method" id="Peer-onPacket-nav"><a href="Peer.html#onPacket">onPacket</a></li></ul></li><li id="RPCWallet-nav"><a href="RPCWallet.html">RPCWallet</a><ul class='methods'><li data-type="method" id="RPCWallet-addAncestor-nav"><a href="RPCWallet.html#addAncestor">addAncestor</a></li><li data-type="method" id="RPCWallet-checkAncestorCount-nav"><a href="RPCWallet.html#checkAncestorCount">checkAncestorCount</a></li><li data-type="method" id="RPCWallet-connectToPeers-nav"><a href="RPCWallet.html#connectToPeers">connectToPeers</a></li><li data-type="method" id="RPCWallet-createAndSignTransaction-nav"><a href="RPCWallet.html#createAndSignTransaction">createAndSignTransaction</a></li><li data-type="method" id="RPCWallet-destroyPeers-nav"><a href="RPCWallet.html#destroyPeers">destroyPeers</a></li><li data-type="method" id="RPCWallet-getUTXOs-nav"><a href="RPCWallet.html#getUTXOs">getUTXOs</a></li><li data-type="method" id="RPCWallet-initialize-nav"><a href="RPCWallet.html#initialize">initialize</a></li><li data-type="method" id="RPCWallet-rebroadcastTransactions-nav"><a href="RPCWallet.html#rebroadcastTransactions">rebroadcastTransactions</a></li><li data-type="method" id="RPCWallet-rpcRequest-nav"><a href="RPCWallet.html#rpcRequest">rpcRequest</a></li><li data-type="method" id="RPCWallet-sendDataToChain-nav"><a href="RPCWallet.html#sendDataToChain">sendDataToChain</a></li><li data-type="method" id="RPCWallet-sendTX-nav"><a href="RPCWallet.html#sendTX">sendTX</a></li><li data-type="method" id="RPCWallet-signMessage-nav"><a href="RPCWallet.html#signMessage">signMessage</a></li><li data-type="method" id="RPCWallet-updateAncestorStatus-nav"><a href="RPCWallet.html#updateAncestorStatus">updateAncestorStatus</a></li></ul></li></ul><h3 id="global-nav">Global</h3><ul><li><a href="global.html#createPatch">createPatch</a></li><li><a href="global.html#createPatchedRecord">createPatchedRecord</a></li><li><a href="global.html#createRFC6902Patch">createRFC6902Patch</a></li><li><a href="global.html#decodeArtifact">decodeArtifact</a></li><li><a href="global.html#fromJSON">fromJSON</a></li><li><a href="global.html#getClassName">getClassName</a></li><li><a href="global.html#isValidWIF">isValidWIF</a></li><li><a href="global.html#signSelf">signSelf</a></li><li><a href="global.html#toJSON">toJSON</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        core/oipd-api/daemonApi.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>import axios from 'axios'
import { MPSingle } from '../../modules'
import { decodeArtifact } from '../../decoders'

/**
 * The Transaction ID on the Blockchain.
 * @typedef {string} TXID
 * @example &lt;caption>Full TXID Reference&lt;/caption>
 * 8a83ecb7812ca2770814d996529e153b07b103424cd389b800b743baa9604c5b
 * @example &lt;caption>Shortened TXID Reference&lt;/caption>
 * 8a83ec
 */

/**
 * Objects that are used to build an elasticsearch complex query
 * @typedef {Object} queryObject
 * @property {string} field - artifact property ex. artifact.info.title
 * @property {string} query - the query term that will be searched on the field ex. 'Some title'
 * @property {string} operator - Can be: "AND", "OR", "NOT", or "wrap" (wrap objects will also have a property called 'type' which can be either 'start', 'end', or 'all')
 * @property {string} type - Can be: 'start', 'end', or 'all'
 * @example &lt;caption>Search a query on a specific field&lt;/caption>
 * let fieldObject = {field: "artifact.title", query: "Some Title"}
 * @example &lt;caption>Search a query on all fields&lt;/caption>
 * let queryObject = {query: "cats"}
 * @example &lt;caption>Add a Complex Operator (AND, OR, or NOT)&lt;/caption>
 * let complexObject = {operator: "AND"}
 * @example &lt;caption>Wrap parenthesis around the entire search query&lt;/caption>
 * let wrapAll = {operator: "wrap", type: "all"}
 * @example &lt;caption>Add a beginning parenthesis&lt;/caption>
 * let wrapStart = {operator: "wrap", type: "start"}
 * @example &lt;caption> Add an ending parenthesis&lt;/caption>
 * let wrapEnd = {operator: "wrap", type: "end"}
 * @example &lt;caption>Build a search query&lt;/caption>
 * let searchQuery = [
 *      {operator: "wrap", type: "start"},
 *      {field: "artifact.type", query: "research"},
 *      {operator: "AND"}
 *      {field: "artifact.info.year", query: "2017"}
 *      {operator: "wrap", type: "end"},
 *      {operator: "OR"},
 *      {operator: "wrap", type: "start"},
 *      {field: "artifact.info.year", query: "2016"},
 *      {operator: "AND"},
 *      {field: "artifact.type", query: "music"},
 *      {operator: "wrap", type: "end"},
 * ]
 * let query = DaemonApi.createQs(searchQuery)
 * //query === "( artifact.type:"research" AND artifact.info.year:"2017" ) OR ( artifact.info.year:"2016" AND artifact.type:"music" )"
 * let {artifacts} = await DaemonApi.searchArtifacts(query)
 * @example &lt;caption>Make things easier on yourself with constants and functions&lt;/caption>
 * const field = (field, query) => {return {field, query}}
 * const query = query => {return {query}}
 * const WrapAll = {operator: "wrap", type: "all"}
 * const WrapStart = {operator: "wrap", type: "start"}
 * const WrapEnd = {operator: "wrap", type: "end"}
 * const AND = {operator: "AND"}
 * const OR  = {operator: "OR"}
 * const NOT = {operator: "NOT"}
 *
 * let query = [
 *      field("artifact.type", "research"),
 *      AND,
 *      field("artifact.info.year", "2017"),
 *      WrapAll,
 *      OR,
 *      WrapStart,
 *      field("artifact.type", "music",
 *      AND,
 *      field("artifact.info.year", "2016"),
 *      WrapEnd
 * ]
 * let qs = DaemonApi.createQs(query)
 */

const decodeArray = (artifacts) => {
  let tmpArray = []
  for (let art of artifacts) {
    tmpArray.push(decodeArtifact(art))
  }
  return tmpArray
}

// ToDo: change to 'https' when ready
const localhost = 'http://localhost:1606/oip'
const defaultOIPdURL = 'https://api.oip.io/oip'

/**
 * Class to make HTTP calls to an OIP Daemon
 */
class DaemonApi {
  /**
   * ##### Examples
   * Spawn an OIP Daemon API (OIPdAPI) that connects to a local running daemon
   * ```javascript
   * import {DaemonApi} from 'js-oip'
   *
   * let oipd = new DaemonApi("localhost:1606") //leave blank for default API URL
   * let latestArtifacts = await oipd.getLatestArtifacts()
   * ```
   * @param  {String} [daemonUrl="https://api.oip.io/oip"] - The URL of an OIP Daemon
   */
  constructor (daemonUrl) {
    if (daemonUrl) {
      if (daemonUrl === 'localhost') {
        this.setUrl(localhost)
      } else {
        this.setUrl(daemonUrl)
      }
    } else {
      this.setUrl(defaultOIPdURL)
    }
  }

  /**
   * Set the DaemonUrl
   * @param {String} daemonUrl - the URL of an OIP Daemon (OIPd)
   * @example
   * DaemonApi.setUrl('https://api.oip.io/oip')
   * let url = DaemonUrl.getUrl()
   * url === 'https://api.oip.io/oip' //true
   */
  setUrl (daemonUrl) {
    this.url = daemonUrl

    this.index = new axios.create({ // eslint-disable-line
      baseURL: this.url
    })
  }

  /**
   * Get current DaemonUrl
   * @return {String} daemonUrl
   * @example
   * let url = DaemonUrl.getUrl()
   */
  getUrl () {
    return this.url
  }

  /**
   * Get Axios Instance
   * @return {axios}
   */
  getNetwork () {
    return this.index
  }

  /**
   * Search the Index for artifacts by query
   * @param {string} query - your search query
   * @param {number} [limit=100] - max num of results
   * @return {Promise&lt;Object>}
   * @example
   * let {success, artifacts, error} = await DaemonApi.search('myQuery')
   */
  async searchArtifacts (query, limit) {
    if (typeof query !== 'string') {
      return { success: false, error: `'query' must be of type string` }
    }

    let res
    try {
      res = await this.index.get(`/artifact/search`, {
        params: {
          q: query,
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to search artifacts for: ${query} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let { count, total, results } = res.data
      return { success: true, artifacts: decodeArray(results), count, total }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Search Artifacts by type and subtype
   * @param {string} type - options: video, music, audio, image, text, research, and property (as of 12/15/18)
   * @param {string} [subtype] - options: tomogram (as of (12/15/18)
   * @return {Promise&lt;Object>}
   * @example
   * let {success, artifacts, error} = await DaemonApi.searchArtifactsByType('research', 'tomogram')
   */
  async searchArtifactsByType (type, subtype) {
    if (type.split('-').length === 2) {
      let split = type.split('-')[0]
      type = split[0]
      subtype = split[1]
    }

    const typeQs = `artifact.type:`
    const subtypeQs = `artifact.subtype:`

    type = type.toLowerCase()
    subtype = subtype ? subtype.toLowerCase() : null

    let typeArr = []
    switch (type) {
      // 40 and 41s
      case 'video':
        typeArr.push('video', 'Video', 'Video-Basic', 'Video-Series')
        break
      case 'music':
        typeArr.push('music')
        break
      case 'image':
        typeArr.push('Image-Basic', 'Image-Gallery')
        break
      case 'audio':
        typeArr.push('Audio-Basic', 'music')
        break
      case 'text':
        typeArr.push('Text-Basic')
        break
        // 42s
      case 'research':
        typeArr.push('research')
        break
      case 'property':
        typeArr.push('Property')
        break
      default:
        throw new Error(`invalid type: ${type}`)
    }

    let typeQuery = ``
    let subtypeQuery = ``
    const OR = 'OR'
    const AND = 'AND'
    for (let i = 0; i &lt; typeArr.length; i++) {
      typeQuery += `${typeQs}${typeArr[i]}`
      if (i !== typeArr.length - 1) {
        typeQuery += ` ${OR} `
      }
    }

    let query = `(${typeQuery}) `
    if (subtype) {
      subtypeQuery += `${AND} `
      subtypeQuery += `${subtypeQs}${subtype}`
      query += subtypeQuery
    }

    try {
      return await this.searchArtifacts(query)
    } catch (err) {
      throw err
    }
  }

  /**
   * Generate a complex querystring for elasticsearch
   * @param {Array.&lt;queryObject>} args - An array of objects that follow given example
   * @return {string}
   * @example &lt;caption>Search for both Research and Music artifact types that were created in 2017&lt;/caption>
   * let args = [
   *      {operator: "wrap", type: 'start'},
   *      {field: "artifact.details.defocus", query: "-10"},
   *      {operator: "AND"},
   *      {field: "artifact.details.microscopist", query: "Yiwei Chang"},
   *      {operator: "wrap", type: "end"},
   *      {operator: "OR"},
   *      {operator: "wrap", type: "start"},
   *      {field: "artifact.details.defocus", query: "-8"},
   *      {operator: "AND"},
   *      {field: "artifact.details.microscopist", query: "Ariane Briegel"},
   *      {operator: "wrap", type: "end"},
   * ]
   * //the query would end up looking something like:
   * let query = "(artifact.details.defocus:"-10" AND artifact.details.microscopist:"Yiwei Chang") OR (artifact.details.defocus:"-8" AND artifact.details.microscopist:"Ariane Briegel")"
   * @example
   * let querystring = this.generateQs(args)
   * querystring === query //true
   * let {artifacts} = await this.searchArtifacts(querystring)
   */
  createQs (args) {
    let query = ``
    const AND = 'AND'
    const OR = 'OR'
    const NOT = 'NOT'
    for (let i = 0; i &lt; args.length; i++) {
      if (i !== 0) {
        query += ' '
      }
      if (args[i].operator) {
        if (args[i].operator.toUpperCase() === AND || args[i].operator.toUpperCase() === OR || args[i].operator.toUpperCase() === NOT) {
          args[i] = args[i].operator.toUpperCase()
          query += `${args[i]}`
        } else if (args[i].operator.toLowerCase() === 'wrap') {
          if (args[i]['type'] === 'start') {
            query += '('
          } else if (args[i]['type'] === 'end') {
            query += ')'
          } else if (args[i]['type'] === 'all') {
            query = query.slice(0, -1) // this is arbitrary--just to standardize return vals
            query = `(${query})`
          }
        } else {
          throw new Error(`Provided invalid operator: Options: "AND", "OR", "NOT", "wrap"`)
        }
      } else {
        if (args[i].field) {
          query += `${args[i].field}:"${args[i].query}"`
        } else {
          query += `${args[i].query}` // do these need to be wrapped in quotes?
        }
      }
    }
    // console.log(query)
    return query
  }

  /**
   * Get an Artifact from the Index by TXID
   * @param {TXID} txid  - transaction id of the artifact you wish to retrieve
   * @return {Promise&lt;Object>}
   * @example
   * let txid = 'cc9a11050acdc4401aec3f40c4cce123d99c0f2c27d4403ae4a2536ee38a4716'
   * let {success, artifact, error} = await DaemonApi.getArtifact(txid)
   */
  async getArtifact (txid) {
    let res
    try {
      res = await this.index.get(`/artifact/get/${txid}`)
    } catch (err) {
      return new Error(`Failed to get artifact: ${txid} -- ${err}`)
    }
    if (!res || !res.data) {
      return { success: false, error: `Missing response data: ${res.data} for txid ${txid}` }
    }

    if (!res.data.results || !Array.isArray(res.data.results) || res.data.results.length &lt; 1) {
      return { success: false, error: `No results found for txid ${txid}` }
    }

    let [artifact] = res.data.results

    return { success: true, artifact: decodeArtifact(artifact) } // ToDO: OIPDecoder
  }

  /**
   * Get a Record from the Index by TXID
   * @param {TXID} txid  - transaction id of the artifact you wish to retrieve
   * @return {Promise&lt;Object>}
   * @example
   * let txid = 'cc9a11050acdc4401aec3f40c4cce123d99c0f2c27d4403ae4a2536ee38a4716'
   * let {success, record, error} = await DaemonApi.getRecord(txid)
   */
  async getRecord (txid) {
    let res
    try {
      res = await this.index.get(`/oip042/record/get/${txid}`)
    } catch (err) {
      return new Error(`Failed to get Record: ${txid} -- ${err}`)
    }
    if (!res || !res.data) {
      return { success: false, error: `Missing response data: ${res.data} for txid ${txid}` }
    }

    if (!res.data.results || !Array.isArray(res.data.results) || res.data.results.length &lt; 1) {
      return { success: false, error: `No results found for txid ${txid}` }
    }

    let [record] = res.data.results

    return { success: true, record: decodeArtifact(record) } // ToDO: OIPDecoder
  }

  /**
   * Get multiple artifacts by TXID
   * @param {Array.&lt;TXID>} txids - an array of transaction IDs
   * @return {Promise&lt;Object>}
   * @example
   * const txid1 = '6ffbffd475c7eabe0acc664087ac56c13ac7c2084746619182b360c2f19e430e'
   * const txid2 = 'f72c314d257d8062581788ab56bbe4ab1dc09dafb7961866903d1144575a3b48'
   * const txid3 = '0be3e260a9ff71464383e328d05d9e85984dd6636626bc0356eae8440de150aa'
   * let txArray = [txid1, txid2, txid3]
   * let {success, artifacts, error} = await DaemonApi.getArtifacts(txArray)
   */
  async getArtifacts (txids) {
    if (!Array.isArray(txids)) {
      return { success: false, error: `'txids' must be an Array of transaction IDs` }
    }
    let artifacts = []
    for (let txid of txids) {
      let res
      try {
        res = await this.getArtifact(txid)
      } catch (err) {
        throw new Error(`Failed to get artifacts: ${txids} -- ${err}`)
      }
      if (res.success) artifacts.push(res.artifact)
    }
    return { success: true, artifacts: artifacts }
  }

  /**
   * Get the latest artifacts published to the Index
   * @param {number} [limit=100] - The amount of artifact you want returns ( max: 1000 )
   * @param {boolean} [nsfw=false] - not safe for work
   * @return {Promise&lt;Object>}
   * @example
   * let limit = 50
   * let {success, artifacts, error} = await DaemonApi.getLatestArtifacts(limit)
   */
  async getLatestArtifacts (limit = 100, nsfw = false) {
    let res
    try {
      res = await this.index.get(`/artifact/get/latest`, {
        params: {
          nsfw,
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to get latest artifacts: ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let artifacts = res.data.results
      return { success: true, artifacts: decodeArray(artifacts) }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get the latest version 41 artifacts published to the Index
   * @param {number} [limit=100] - The amount of artifact you want returns ( max: 1000 )
   * @param {boolean} [nsfw=false] - not safe for work
   * @return {Promise&lt;Object>}
   * @example
   * const limit = 50
   * let {success, artifacts, error} = await DaemonApi.getLatest041Artifacts(limit)
   */
  async getLatest041Artifacts (limit = 100, nsfw = false) {
    let res
    try {
      res = await this.index.get(`/oip041/artifact/get/latest`, {
        params: {
          nsfw,
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to get latest 041 artifacts -- ${err}`)
    }

    if (res &amp;&amp; res.data) {
      let artifacts = res.data.results
      return { success: true, artifacts: decodeArray(artifacts) }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get a version 41 Artifact from the Index by TXID
   * @param {TXID} txid  - transaction id of the artifact you wish to retrieve
   * @return {Promise&lt;Object>}
   * @example
   * let txid = '8c204c5f39b67431c59c7703378b2cd3b746a64743e130de0f5cfb2118b5136b'
   * let {success, artifact, error} = await DaemonApi.get041Artifact(txid)
   */
  async get041Artifact (txid) {
    let res
    try {
      res = await this.index.get(`/oip041/artifact/get/${txid}`)
    } catch (err) {
      throw new Error(`Failed to get 041 artifact: ${txid} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let [artifact] = res.data.results
      return { success: true, artifact: decodeArtifact(artifact) }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get multiple OIP041 artifact by their TXID
   * @param {Array.&lt;TXID>} txids - an array of transaction IDs
   * @return {Promise&lt;Object>}
   * @example
   * const txid1 = '8c204c5f39b67431c59c7703378b2cd3b746a64743e130de0f5cfb2118b5136b'
   * const txid2 = 'a690609a2a8198fbf4ed3fd7e4987637a93b7e1cad96a5aeac2197b7a7bf8fb9'
   * const txid3 = 'b4e6c9e86d14ca3565e57fed8b482d742a7a1cff0dd4cabfe9e3ea29efb3211c'
   * let txArray = [txid1, txid2, txid3]
   * let {success, artifacts, error} = await DaemonApi.get041Artifacts(txArray)
   */
  async get041Artifacts (txids) {
    if (!Array.isArray(txids)) {
      return { success: false, error: `'txids' must be an Array of transaction IDs` }
    }
    let artifacts = []
    for (let txid of txids) {
      let res
      try {
        res = await this.get041Artifact(txid)
      } catch (err) {
        throw new Error(`Failed to get 041 artifacts: ${txids} -- ${err}`)
      }
      if (res.success) artifacts.push(res.artifact)
    }
    return { success: true, artifacts: artifacts }
  }

  /**
   * Get the version 42 artifacts published to the Index
   * @param {number} [limit=100] - The amount of artifact you want returns ( max: 1000 )
   * @param {boolean} [nsfw=false] - not safe for work artifact
   * @return {Promise&lt;Object>}
   * @example
   * const limit = 50
   * let {success, artifacts, error} = await DaemonApi.getLatest042Artifacts(limit)
   */
  async getLatest042Artifacts (limit = 100, nsfw = false) {
    let res
    try {
      res = await this.index.get(`/oip042/artifact/get/latest`, {
        params: {
          nsfw,
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to get latest 042 artifacts: ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let artifacts = res.data.results
      return { success: true, artifacts: decodeArray(artifacts) }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get the latest Alexandria Media artifacts (version "40") published to the Index
   * @param {number} [limit=100] - The amount of artifact you want returns ( max: 1000 )
   * @param {boolean} [nsfw=false] - not safe for work
   * @return {Promise&lt;Object>}
   * @example
   * const limit = 50
   * let {success, artifacts, error} = await DaemonApi.getLatestAlexandriaMediaArtifacts(limit)
   */
  async getLatestAlexandriaMediaArtifacts (limit = 100, nsfw = false) {
    let res
    try {
      res = await this.index.get(`/alexandria/artifact/get/latest`, {
        params: {
          nsfw,
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to get latest alexandria media artifacts -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let artifacts = res.data.results
      return { success: true, artifacts: decodeArray(artifacts) }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get an Alexandria Media Artifact (version "40") from the Index by TXID
   * @param {TXID} txid  - transaction id of the artifact you wish to retrieve
   * @return {Promise&lt;Object>}
   * @example
   * let txid = '756f9199c8992cd42c750cbd73d1fa717b31feafc3b4ab5871feadae9848acac'
   * let {success, artifact, error} = await DaemonApi.getAlexandriaMediaArtifact(txid)
   */
  async getAlexandriaMediaArtifact (txid) {
    let res
    try {
      res = await this.index.get(`/alexandria/artifact/get/${txid}`)
    } catch (err) {
      throw new Error(`Failed to get alexandria media artifact: ${txid} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let [artifact] = res.data.results
      return { success: true, artifact: decodeArtifact(artifact) } // ToDo: OIPDecoder
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get one or more Alexandria Media (version "40") artifacts by their TXID
   * @param {Array.&lt;TXID>} txids - an array of transaction IDs
   * @return {Promise&lt;Object>}
   * @example
   * const txid1 = '33e04cb2dcf7004a460d0719eea36129ebaf48fb10cffff19653bfeeca9bc7ad'
   * const txid2 = 'a2110a1058b620d91bc78ad71e466d736f6b8b078025d19c23ddac6a3c0355ee'
   * const txid3 = 'b6f89f3c6410276f7d4cf9c3c58c4f0577495650e742e71dddc669c9e912217c'
   * let txArray = [txid1, txid2, txid3]
   * let {success, artifacts, error} = await DaemonApi.getAlexandriaMediaArtifacts(txArray)
   */
  async getAlexandriaMediaArtifacts (txids) {
    if (!Array.isArray(txids)) {
      return { success: false, error: `'txids' must be an Array of transaction IDs` }
    }
    let artifacts = []
    for (let txid of txids) {
      let res
      try {
        res = await this.getAlexandriaMediaArtifact(txid)
      } catch (err) {
        throw new Error(`Failed to get alexandria media artifacts: ${txids} -- ${err}`)
      }
      if (res.success) artifacts.push(res.artifact)
    }
    return { success: true, artifacts: artifacts }
  }

  /**
   * Search the floData from FLO provided by the Daemon's Index
   * @param {string} query - your search query
   * @param {number} [limit] - max num of results
   * @return {Promise&lt;Object>} Returns FLO transactions that contain your query in their respective floData
   * @example
   * let query = 'myQuery'
   * let {success, txs, error} = await DaemonApi.searchFloData(query)
   * for (let i of txs) {
   *     let floData = i.tx.floData
   * }
   */
  async searchFloData (query, limit) {
    if (typeof query !== 'string') {
      return { success: false, error: `'query' must be of type string` }
    }
    let res
    try {
      res = await this.index.get(`/floData/search`, {
        params: {
          q: query,
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to search flo data for: ${query} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let txs = res.data.results
      return { success: true, txs }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get floData by TXID
   * @param {TXID} txid - the transaction id you wish to grab the floData from
   * @return {Promise.&lt;Object>}
   * @example
   * let txid = '83452d60230d3c2c69000c2a79da79fe60cdf63012f946ac46e6df3409fb1fa7'
   * let {success, tx, error} = await DaemonApi.getFloData(txid)
   * let floData = tx.floData
   */
  async getFloData (txid) {
    let res
    try {
      res = await this.index.get(`/floData/get/${txid}`)
    } catch (err) {
      throw new Error(`Failed to get flo tx: ${txid} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let [tx] = res.data.results
      return { success: true, tx }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get a Multipart Single by its TXID
   * @param {TXID} txid - transaction id of the single multipart
   * @return {Promise&lt;Object>}
   * @example
   * let txid = 'f550b9739e7453224075630d44cba24c31959af913aeb7cb364a563f96f54548'
   * let {success, multipart, error} = await DaemonApi.getMultipart(txid)
   */
  async getMultipart (txid) {
    let res
    try {
      res = await this.index.get(`/multipart/get/id/${txid}`)
    } catch (err) {
      throw new Error(`Failed to get multipart by txid: ${txid} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let [mp] = res.data.results
      return { success: true, multipart: new MPSingle(mp) }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get OIP Multiparts by the First TXID Reference
   * @param {string} ref - the TXID reference of the first multipart
   * @param {number} [limit] - max num of results
   * @return {Promise&lt;Object>}
   * @example
   * let ref = '8c204c5f39'
   * let {success, multiparts, error} = await DaemonApi.getMultiparts(ref)
   */
  async getMultiparts (ref, limit) {
    let res
    let querystring = `/multipart/get/ref/${ref}`
    try {
      res = await this.index.get(querystring, {
        params: {
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to get multiparts by ref: ${ref} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let results = res.data.results
      let multiparts = []
      for (let mp of results) {
        multiparts.push(new MPSingle(mp))
      }
      multiparts.sort((a, b) => a.getPart() - b.getPart())
      return { success: true, multiparts }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get a historian data point by its txid
   * @param {TXID} txid
   * @return {Promise&lt;Object>}
   * @example
   * let id = '83452d60230d3c2c69000c2a79da79fe60cdf63012f946ac46e6df3409fb1fa7'
   * let {success, hdata, error} = await DaemonApi.getHistorianData(id)
   */
  async getHistorianData (txid) {
    let res
    try {
      res = await this.index.get(`historian/get/${txid}`)
    } catch (err) {
      throw new Error(`Failed to get historian data by txid: ${txid} -- ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let [hdata] = res.data.results
      return { success: true, hdata }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get the latest historian data points
   * @param {number} [limit=100]
   * @return {Promise&lt;Object>}
   * @example
   * let {success, hdata, error} = await DaemonApi.getLastestHistorianData()
   */
  async getLastestHistorianData (limit = 100) {
    let res
    try {
      res = await this.index.get(`historian/get/latest`, {
        params: {
          limit
        }
      })
    } catch (err) {
      throw new Error(`Failed to get latest historian data: ${err}`)
    }
    if (res &amp;&amp; res.data) {
      let hdata = res.data.results
      return { success: true, hdata }
    } else {
      return { success: false, error: `Missing response data: ${res.data}` }
    }
  }

  /**
   * Get OIP Daemon specs
   * @return {Promise&lt;Object>}
   * @example
   * let versionData = await DaemonApi.getVersion()
   */
  async getVersion () {
    let res
    try {
      res = await this.index.get('/daemon/version')
    } catch (err) {
      throw new Error(`Failed to get daemon version: ${err}`)
    }
    return res.data
  }

  /**
   * Get the Daemon's sync status
   * @return {Promise&lt;Object>}
   */
  async getSyncStatus () {
    let res
    try {
      res = await this.index.get('/sync/status')
    } catch (err) {
      throw new Error(`Failed to get sync status: ${err}`)
    }
    return res.data
  }

  /**
   * Get latest oip5 records
   * @param {Object} [options]
   * @param {number} [options.limit=10] - max num of results
   * @param {string} [options.after] - the string ID returned on response to get the next set of data
   * @param {number} [options.pages] - page number
   * @param {string} [options.sort] - sort field ascending or descending. Format must match: ([0-9a-zA-Z._-]+:[ad]$?)+
   * @return {Promise&lt;Object>}
   */
  async getLatestOip5Records (options) {
    let res
    try {
      res = await this.index.get('o5/record/get/latest', {
        params: {
          ...options
        }
      })
    } catch (err) {
      throw new Error(`Failed to get latest oip5 records: ${err}`)
    }
    if (res &amp;&amp; res.data) {
      res = { success: true, payload: decodeResponseData(res.data) }
      return res
    } else {
      return { success: false, error: `No data returned from axios response on getLatestOip5Records` }
    }
  }

  /**
   * Get latest oip5 templates
   * @param {Object} [options]
   * @param {number} [options.limit=10] - max num of results
   * @param {string} [options.after] - the string ID returned on response to get the next set of data
   * @param {number} [options.pages] - page number
   * @param {string} [options.sort] - sort field ascending or descending. Format must match: ([0-9a-zA-Z._-]+:[ad]$?)+
   * @return {Promise&lt;Object>}
   */
  async getLatestOip5Templates (options) {
    let res
    try {
      res = await this.index.get('o5/template/get/latest', {
        params: {
          ...options
        }
      })
    } catch (err) {
      throw new Error(`failed to get latest oip5 templates: ${err}`)
    }
    if (res &amp;&amp; res.data) {
      res = { success: true, payload: decodeResponseData(res.data) }
      return res
    } else {
      return { success: false, error: `Failed to get data back from axios response` }
    }
  }

  /**
   * Get oip5 record
   * @param {string} [txid] - transaction id of record
   * @return {Promise&lt;Object>}
   */
  async getOip5Record (txid) {
    let res
    try {
      res = await this.index.get(`o5/record/get/${txid}`)
    } catch (err) {
      return { success: false, error: err }
    }
    if (res &amp;&amp; res.data) {
      res = { success: true, payload: decodeResponseData(res.data) }
      return res
    } else {
      return { success: false, error: `no data returned from axios response getOip5Record: ${txid}` }
    }
  }

  /**
   * Get oip5 records
   * @param {Array.&lt;string>|string} txids - transaction id of record
   * @return {Promise&lt;Array.&lt;Object>>}
   */
  async getOip5Records (txids) {
    if (typeof txids === 'string') {
      return this.getOip5Record(txids)
    }
    let promiseArray = []
    for (let txid of txids) {
      promiseArray.push(this.getOip5Record(txid))
    }
    let responseArray = []
    for (let promise of promiseArray) {
      let resolvedPromise
      try {
        resolvedPromise = await promise
      } catch (err) {
        throw new Error(`Failed to get oip5 records: ${err}`)
      }
      responseArray.push(resolvedPromise)
    }
    return responseArray
  }

  /**
   * Get oip5 template
   * @param {string} [txid] - transaction id of record
   * @return {Promise&lt;Object>}
   */
  async getOip5Template (txid) {
    let res
    try {
      res = await this.index.get(`o5/template/get/${txid}`)
    } catch (err) {
      throw new Error(`Failed to get oip5 template: ${err}`)
    }
    if (res &amp;&amp; res.data) {
      res = { success: true, payload: decodeResponseData(res.data) }
      return res
    } else {
      return { success: false, error: `No data returned from axios request getOip5Template: ${txid}` }
    }
  }

  /**
   * Get oip5 templates
   * @param {string|Array.&lt;string>} txids - transaction ids of record
   * @return {Promise&lt;Array.&lt;Object>>}
   */
  async getOip5Templates (txids) {
    if (typeof txids === 'string') {
      return this.getOip5Template(txids)
    }
    if (!Array.isArray(txids)) {
      throw new Error(`The param "txids" must be an array of txids or a single txid string`)
    }
    let promiseArray = []
    for (let txid of txids) {
      promiseArray.push(this.getOip5Template(txid))
    }
    let responseArray = []
    for (let promise of promiseArray) {
      let resolvedPromise
      try {
        resolvedPromise = await promise
      } catch (err) {
        throw new Error(`Could not get oip5 templates: ${err}`)
      }

      responseArray.push(resolvedPromise)
    }
    return responseArray
  }

  /**
   * Get oip5 template
   * @param {string|Array&lt;string>} [tmplIdentifiers] - 'template identifiers' transaction IDs'
   * @return {Promise&lt;Object>}
   */
  async getOip5Mapping (tmplIdentifiers) {
    if (typeof tmplIdentifiers === 'string') {
      tmplIdentifiers = [tmplIdentifiers]
    }
    let res
    try {
      res = await this.index.get(`o5/record/mapping/${tmplIdentifiers}`)
    } catch (err) {
      throw new Error(`Failed to get oip5 mappings: ${err}`)
    }

    if (res &amp;&amp; res.data) {
      res = { success: true, payload: res.data }
      return res
    } else {
      return { success: false, error: `Failed to get data back from axios request trying to get oip5 mappings` }
    }
  }

  /**
   * Search oip5 templates
   * @param {Object} options
   * @param {string} options.q - query string query
   * @param {number} [options.limit=10] - max num of results (limited to 10 on backend)
   * @param {string} [options.after] - the string ID returned on response to get the next set of data
   * @param {number} [options.pages] - page number
   * @param {string} [options.sort] - sort field ascending or descending. Format must match: ([0-9a-zA-Z._-]+:[ad]$?)+
   * @return {Promise&lt;Object>}
   */
  async searchOip5Records (options) {
    let res
    try {
      res = await this.index.get(`o5/record/search`, {
        params: {
          ...options
        }
      })
    } catch (err) {
      throw new Error(`Failed to search oip5 records: ${err}`)
    }

    if (res &amp;&amp; res.data) {
      res = { success: true, payload: decodeResponseData(res.data) }
      return res
    } else {
      return { success: false, error: 'Did not receive data back from axios request trying to search oip5 records' }
    }
  }

  /**
   * Search oip5 templates
   * @param {Object} options
   * @param {string} options.q - query string query
   * @param {number} [options.limit=10] - max num of results (limited to 10 on backend)
   * @param {string} [options.after] - the string ID returned on response to get the next set of data
   * @param {number} [options.pages] - page number
   * @param {string} [options.sort] - sort field ascending or descending. Format must match: ([0-9a-zA-Z._-]+:[ad]$?)+
   * @return {Promise&lt;Object>}
   */
  async searchOip5Templates (options) {
    let res
    try {
      res = await this.index.get(`o5/template/search`, {
        params: {
          ...options
        }
      })
    } catch (err) {
      throw new Error(`Failed to search oip5 templates: ${err}`)
    }

    if (res &amp;&amp; res.data) {
      res = { success: true, payload: decodeResponseData(res.data) }
      return res
    } else {
      return { success: false, error: 'Did not receive data back from axios request trying to search oip5 templates' }
    }
  }
  async isVerifiedPublisher ({ pubAddr, templateName, apiUrl, localhost = false }) {
    const VERIFIED_PUBLISHER_TEMPLATE = 'tmpl_F471DFF9'
    const verifyApiEndpoint = 'https://api.oip.io/verified/publisher/check/'
    const localhostVerifyEndpoint = 'http://localhost:1607/verified/publisher/check/'

    let tmplName = templateName || VERIFIED_PUBLISHER_TEMPLATE
    let verifyEndpoint = apiUrl || verifyApiEndpoint
    if (localhost) verifyEndpoint = localhostVerifyEndpoint

    const q = `_exists_:record.details.${tmplName} AND meta.signed_by:${pubAddr}`
    let results
    try {
      results = await this.searchOip5Records({ q })
    } catch (err) {
      throw Error(`Failed to search oip5 record for verified publisher: \n ${err}`)
    }

    const { success, payload } = results
    if (success) {
      const { results } = payload
      if (results.length === 0) {
        return { success: false, error: `No verified publisher found` }
      }
      const { meta, record } = results[0]
      const { txid } = meta

      const { details } = record
      const twitterId = details[tmplName].twitterId
      const gabId = details[tmplName].gabId

      let registeredPublisherTxid = details[tmplName].registeredPublisher
      if (registeredPublisherTxid.raw) {
        let buf = Buffer.from(registeredPublisherTxid.raw, 'base64')
        registeredPublisherTxid = buf.toString('hex')
      }
      let regPub
      try {
        regPub = await this.getOip5Record(registeredPublisherTxid)
      } catch (err) {
        throw Error(`Failed to search oip5 record for verified publisher: \n ${err}`)
      }

      // todo: support testnet templates ?
      let name
      if (regPub.success) {
        let res = regPub.payload.results[0]
        if (res) {
          let tmpl = res.record.details['tmpl_433C2783']
          if (tmpl) {
            name = res.record.details['tmpl_433C2783'].name
          }
        }
      }

      let res
      try {
        res = await axios.get(`${verifyEndpoint}${txid}`)
      } catch (err) {
        throw Error(`Failed to hit verify api endpoint url: ${verifyEndpoint} \n ${err}`)
      }
      return { success: true,
        payload: {
          ...res.data,
          twitterId,
          gabId,
          name
        } }
    } else {
      return { success: false, error: `Did not receive data back from axios request trying to search oip5 verified publisher: ${pubAddr}` }
    }
  }
}

function decodeResponseData (payload) {
  const { next, ...rest } = payload
  return {
    next: decodeURI(next),
    ...rest
  }
}

export default DaemonApi
</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  
  
</body>
</html>
